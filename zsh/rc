# History
HISTFILE=~/.zsh_history
HISTSIZE=15000
SAVEHIST=15000
setopt appendhistory autocd notify
setopt hist_ignore_dups
setopt hist_ignore_space
setopt share_history
# Allow comments in shell
setopt interactivecomments

# Bindings
bindkey -e
bindkey '^r' history-incremental-search-backward

# completion
autoload -Uz compinit
compinit

# prompt
autoload -U promptinit
promptinit
prompt gentoo

# The following lines were added by compinstall
zstyle :compinstall filename '/etc/zsh/zshrc'

# aliases
alias rr=ranger
alias sprunge='pastebinit -b sprunge.us'
take() { mkdir "$1" && cd "$1" }
# Parenting changing perms on / #
alias chown='chown --preserve-root'
alias chmod='chmod --preserve-root'
alias chgrp='chgrp --preserve-root'

if [[ "${UID}" -ge 1000 ]]; then
  # gpg-agent
	if [[ -f "${HOME}/.gpg-agent-info" ]]; then
		GPG_TTY=$(tty)
		source "${HOME}/.gpg-agent-info"
		export GPG_AGENT_INFO
		export SSH_AUTH_SOCK
		export SSH_AGENT_PID
		export GPG_TTY
	fi

  # start Xorg
	if [[ ! ${DISPLAY} ]]; then
		: exec startx
	fi

  # Auto start tmux if shell is interactive
	if [[ -o interactive && -z "$TMUX" ]]; then
		hash tmux 2>/dev/null \
			&& tmux attach \
			|| exec tmux
	fi

  autoload -U tetris
  zle -N tetris
  bindkey  tetris
fi

[[ -f ~/dotfiles/zsh/env ]] \
  && source ~/dotfiles/zsh/env

# OPAM configuration
. /home/leat/.opam/opam-init/init.zsh > /dev/null 2> /dev/null || true
